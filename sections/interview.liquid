{% if article.metafields.custom.interview != blank %}
  <div class="interview">
    {{ article.metafields.custom.interview | metafield_tag }}
  </div>
{% endif %}
{% assign all_articles = blog.articles %}
<div class="related">
  <div class="related-title">SINCE YOU’RE HERE</div>
    {% for a in all_articles %}
      {% if a.id != article.id %}
        <div class="article estandard" style="display:none">
          <a href="{{ a.url }}">
            {% if a.image %}
              <img src="{{ a.image | img_url: '800x' }}" alt="{{ a.title }}">
            {% endif %}
          </a>
          <div class="article-title title-thang">
            <p>{{ a.title }}</p>
          </div>
        </div>
      {% endif %}
    {% endfor %}
</div>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const items = Array.from(document.querySelectorAll('.related .article'));
    if (items.length <= 3) {
      items.forEach(el => el.style.display = '');
      return;
    }
    // barajar en cliente (Fisher–Yates)
    for (let i = items.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [items[i], items[j]] = [items[j], items[i]];
    }
    // mostrar solo 3
    items.forEach((el, idx) => el.style.display = idx < 3 ? '' : 'none');
  });
  </script>
