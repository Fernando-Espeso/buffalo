{% schema %}
{
  "name": "Related Products",
  "settings": [],
  "blocks": [
    {
      "type": "product",
      "name": "Product",
      "settings": [
        {
          "type": "product",
          "label": "Select a related product",
          "id": "product"  // Adding an ID for the setting field
        }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [
    {
      "name": "Related Products",
      "category": "Product"
    }
  ]
}
{% endschema %}


<div class="related-products">
    <div class="hero-info">Related Products</div>
      {% for block in section.blocks %}
        {% assign related_product = all_products[block.settings.product] %}
        {% if related_product %}
          <div class="product">
            <a href="{{ related_product.url }}">
              {% if related_product.featured_image %}
                <img src="{{ related_product.featured_image | image_url: '300x' }}" alt="{{ related_product.title }}">
              {% else %}
                <p>No image available</p>  <!-- Display a fallback message if no image is found -->
              {% endif %}
              <div class="product-title title-thang">
                  <h3>{{ related_product.title }}</h3>
                  <p>{{ related_product.price | money }}</p>
              </div>
            </a>
          </div>
        {% else %}
          <p>No related product found.</p>  <!-- This will show if the related product isn't found -->
        {% endif %}
      {% endfor %}
  </div>
  