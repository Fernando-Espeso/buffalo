{% schema %}
{
  "name": "Buffalo-live",
  "settings": [],
  "blocks": [
    {
      "type": "item",
      "name": "Elemento",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Imagen"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Enlace"
        },
        {
          "type": "text",
          "id": "caption",
          "label": "Texto (caption)"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Bloque Repetidor",
      "category": "Custom"
    }
  ]
}
{% endschema %}

<section class="repeater-section">
  <div class="repeater-wrapper">
    {% for block in section.blocks %}
      {% assign img = block.settings.image %}
      {% assign link = block.settings.link %}
      {% assign caption = block.settings.caption %}
      
      <div class="repeater-item">
        {% if link != blank %}
          <a href="{{ link }}">
        {% endif %}
        
        {% if img != blank %}
          <img src="{{ img | img_url: 'medium' }}" alt="{{ caption }}">
        {% endif %}
        
        {% if caption != blank %}
          <p>{{ caption }}</p>
        {% endif %}
        
        {% if link != blank %}
          </a>
        {% endif %}
      </div>
    {% endfor %}
  </div>
</section>

<style>
  .repeater-section {
    padding: 2rem;
  }
  .repeater-wrapper {
    display: flex;
    flex-wrap: wrap;
    gap: 1.5rem;
  }
  .repeater-item {
    max-width: 200px;
    text-align: center;
  }
  .repeater-item img {
    max-width: 100%;
    height: auto;
    display: block;
    margin-bottom: 0.5rem;
  }
  
</style>
